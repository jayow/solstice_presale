<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solstice</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.1/dist/chartjs-plugin-zoom.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --base-bg: #1B1630;
            --surface-bg: #241D3E;
            --eyebrow-color: #FF7A3D;
            --hero-title: #FF8A4C;
            --hero-highlight: #E6E8F0;
            --body-text: #C9CBE1;
            --muted-text: #9A9DB8;
            --nav-active: #FF8A4C;
            --nav-inactive: #B5B7D3;
            --cta-bg: #FF7A3D;
            --cta-hover: #FF8F5C;
            --cta-active: #E8652E;
            --glass-bg: rgba(255,255,255,0.04);
            --glass-border: rgba(255,255,255,0.08);
            --divider: rgba(255,255,255,0.12);
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--base-bg);
            background-image: 
                radial-gradient(circle at top left, rgba(255,255,255,0.04) 0%, transparent 60%),
                linear-gradient(180deg, #241D3E 0%, #1B1630 100%);
            min-height: 100vh;
            color: var(--body-text);
            line-height: 1.6;
        }

        /* Navigation */
        .nav-container {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255,255,255,0.12);
            backdrop-filter: blur(12px);
            border-radius: 14px;
            border: 1px solid rgba(255,255,255,0.15);
            padding: 12px 24px;
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            align-items: center;
            gap: 32px;
            z-index: 1000;
            box-shadow: 0 20px 60px rgba(0,0,0,0.45);
            max-width: 1400px;
            width: calc(100% - 40px);
        }

        .nav-left {
            display: flex;
            align-items: center;
        }

        .nav-center {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .nav-right {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            gap: 12px;
        }

        .nav-links {
            display: flex;
            gap: 24px;
            list-style: none;
            flex: 1;
            justify-content: center;
        }

        .nav-links a {
            color: var(--nav-inactive);
            text-decoration: none;
            font-weight: 500;
            font-size: 14px;
            transition: color 180ms ease-out;
        }

        .nav-links a:hover {
            color: #FFFFFF;
        }

        .nav-links a.active {
            color: var(--nav-active);
        }

        .nav-logo {
            display: flex;
            align-items: center;
            text-decoration: none;
            height: 34px;
        }

        .nav-logo svg {
            height: 100%;
            width: auto;
        }

        .nav-cta {
            background: var(--cta-bg);
            color: #FFFFFF;
            border: none;
            border-radius: 999px;
            padding: 10px 20px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(255,122,61,0.35);
            transition: background-color 180ms ease-out, box-shadow 180ms ease-out, transform 180ms ease-out;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            white-space: nowrap;
        }

        .nav-cta:hover {
            background: var(--cta-hover);
            box-shadow: 0 8px 26px rgba(255,122,61,0.45);
            transform: translateY(-1px);
        }

        .nav-cta:active {
            background: var(--cta-active);
        }

        .nav-cta:focus {
            outline: 2px solid rgba(255,122,61,0.6);
            outline-offset: 2px;
        }

        .nav-twitter-link {
            color: var(--body-text);
            text-decoration: none;
            font-weight: 500;
            font-size: 14px;
            transition: color 180ms ease-out;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .nav-twitter-link:hover {
            color: #FFFFFF;
        }

        .nav-twitter-link svg {
            width: 16px;
            height: 16px;
        }

        .nav-presale-status {
            color: var(--cta-bg);
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }



        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 24px 0;
        }

        .stat-card {
            background: rgba(255,255,255,0.04);
            border: 1px solid rgba(255,255,255,0.08);
            border-radius: 16px;
            backdrop-filter: blur(16px);
            padding: 20px;
            display: flex;
            flex-direction: column;
            text-align: left;
            position: relative;
            padding-left: 28px;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: #FF7A3D;
            border-radius: 16px 0 0 16px;
        }

        .stat-label {
            color: var(--muted-text);
            font-size: 12px;
            font-weight: 500;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .stat-value {
            color: var(--hero-title);
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .stat-subtitle {
            color: var(--muted-text);
            font-size: 13px;
        }

        /* Glass Container Cards */
        .glass-container {
            background: rgba(255,255,255,0.04);
            border: 1px solid rgba(255,255,255,0.08);
            border-radius: 20px;
            backdrop-filter: blur(16px);
            padding: 30px;
            margin: 24px 0;
            box-shadow: 0 20px 60px rgba(0,0,0,0.45);
        }

        .section-title {
            color: var(--hero-title);
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 24px;
        }

        /* Progress Bar */
        .progress-section {
            margin: 40px 0;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 24px;
        }

        .progress-label {
            color: var(--body-text);
            font-size: 16px;
            font-weight: 500;
        }

        .progress-amount {
            color: var(--hero-title);
            font-size: 32px;
            font-weight: 700;
        }

        .progress-bar-wrapper {
            width: 100%;
            height: 48px;
            background: rgba(255,255,255,0.06);
            border-radius: 24px;
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.08);
            position: relative;
            margin: 24px 0;
        }

        .progress-bar-fill {
            height: 100%;
            background: var(--cta-bg);
            border-radius: 24px;
            transition: width 0.5s ease-out;
            box-shadow: 0 6px 20px rgba(255,122,61,0.35);
            position: relative;
        }

        .progress-percentage {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #FFFFFF;
            font-weight: 700;
            font-size: 16px;
            z-index: 10;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            color: var(--muted-text);
            font-size: 14px;
        }

        /* Chart Container */
        .chart-container {
            position: relative;
            height: 280px;
            width: 100%;
            margin-top: 0;
            flex: 1;
            min-height: 280px;
        }

        .chart-controls {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            flex-wrap: nowrap;
            justify-content: flex-start;
        }

        .timeframe-btn {
            padding: 6px 12px;
            background: rgba(255,255,255,0.06);
            border: 1px solid rgba(255,255,255,0.08);
            border-radius: 999px;
            color: var(--body-text);
            font-weight: 500;
            font-size: 12px;
            cursor: pointer;
            transition: background-color 180ms ease-out, border-color 180ms ease-out;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .timeframe-btn:hover {
            background: rgba(255,255,255,0.1);
            border-color: rgba(255,255,255,0.12);
        }

        .timeframe-btn.active {
            background: var(--cta-bg);
            border-color: var(--cta-bg);
            color: #FFFFFF;
            box-shadow: 0 6px 20px rgba(255,122,61,0.35);
        }

        .timeframe-btn:focus {
            outline: 2px solid rgba(255,122,61,0.6);
            outline-offset: 2px;
        }

        /* Transactions Table */
        .transactions-section {
            margin: 40px 0;
        }

        .transactions-table-wrapper {
            overflow-x: auto;
            margin-top: 24px;
        }

        .transactions-table {
            width: 100%;
            border-collapse: collapse;
        }

        .transactions-table thead {
            background: rgba(255,255,255,0.04);
        }

        .transactions-table th {
            padding: 16px;
            text-align: left;
            color: var(--hero-highlight);
            font-weight: 600;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 1px solid var(--divider);
        }

        .transactions-table td {
            padding: 16px;
            color: var(--body-text);
            font-size: 14px;
            border-bottom: 1px solid var(--divider);
        }

        .transactions-table tbody tr {
            transition: background-color 180ms ease-out;
        }

        .transactions-table tbody tr:hover {
            background: rgba(255,255,255,0.02);
        }

        .type-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .type-deposit {
            background: rgba(76, 175, 80, 0.2);
            color: #4CAF50;
            border: 1px solid rgba(76, 175, 80, 0.4);
        }

        .type-refund {
            background: rgba(244, 67, 54, 0.2);
            color: #F44336;
            border: 1px solid rgba(244, 67, 54, 0.4);
        }

        /* Filters */
        .filters-section {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 12px;
            margin-bottom: 24px;
            align-items: end;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            min-width: 0;
        }

        .filter-label {
            color: var(--muted-text);
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .filter-input,
        .filter-select {
            padding: 12px 16px;
            background: rgba(255,255,255,0.06);
            border: 1px solid rgba(255,255,255,0.08);
            border-radius: 12px;
            color: var(--body-text);
            font-size: 14px;
            transition: border-color 180ms ease-out;
        }

        .filter-input:focus,
        .filter-select:focus {
            outline: none;
            border-color: var(--cta-bg);
            box-shadow: 0 0 0 3px rgba(255,122,61,0.1);
        }

        .filter-input::placeholder {
            color: var(--muted-text);
        }

        .btn-group {
            display: flex;
            gap: 8px;
            align-items: flex-end;
        }

        .btn-primary {
            background: var(--cta-bg);
            color: #FFFFFF;
            border: none;
            border-radius: 999px;
            padding: 12px 24px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(255,122,61,0.35);
            transition: background-color 180ms ease-out, box-shadow 180ms ease-out, transform 180ms ease-out;
            white-space: nowrap;
        }

        .btn-primary:hover {
            background: var(--cta-hover);
            box-shadow: 0 8px 26px rgba(255,122,61,0.45);
            transform: translateY(-1px);
        }

        .btn-primary:active {
            background: var(--cta-active);
        }

        .btn-primary:focus {
            outline: 2px solid rgba(255,122,61,0.6);
            outline-offset: 2px;
        }

        .btn-secondary {
            background: rgba(255,255,255,0.06);
            color: var(--body-text);
            border: 1px solid rgba(255,255,255,0.08);
            border-radius: 999px;
            padding: 12px 24px;
            font-weight: 500;
            font-size: 14px;
            cursor: pointer;
            transition: background-color 180ms ease-out, border-color 180ms ease-out;
        }

        .btn-secondary:hover {
            background: rgba(255,255,255,0.1);
            border-color: rgba(255,255,255,0.12);
        }

        .btn-secondary:focus {
            outline: 2px solid rgba(255,122,61,0.6);
            outline-offset: 2px;
        }

        /* Divider */
        .divider {
            height: 1px;
            background: var(--divider);
            margin: 40px 0;
        }

        /* Status Indicator */
        .status-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--muted-text);
            font-size: 14px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #4CAF50;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 40px;
            }

            .nav-container {
                padding: 12px 20px;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            @media (max-width: 1024px) {
                .main-content-grid {
                    grid-template-columns: 1fr !important;
                }
            }
            
            @media (max-width: 640px) {
                .stats-grid {
                    grid-template-columns: 1fr;
                }
                
                .nav-links {
                    display: none;
                }
            }

            .filters-section {
                grid-template-columns: repeat(3, 1fr);
            }
            
            @media (max-width: 1024px) {
                .filters-section {
                    grid-template-columns: repeat(2, 1fr);
                }
            }
            
            @media (max-width: 640px) {
                .filters-section {
                    grid-template-columns: 1fr;
                }
            }
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.02);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255,255,255,0.15);
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="nav-container">
        <div class="nav-left">
            <a href="#" class="nav-logo">
                <svg width="114" height="34" viewBox="0 0 114 34" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_683_8441)">
                        <path d="M43.4563 22.2726C42.8508 22.0097 42.3719 21.6303 42.0213 21.1345C41.6691 20.6386 41.4884 20.0546 41.4775 19.3793H43.8054C43.8363 19.8327 43.9939 20.1916 44.2781 20.4544C44.5623 20.7189 44.9531 20.8496 45.449 20.8496C45.9449 20.8496 46.3542 20.7252 46.6446 20.4781C46.9335 20.2309 47.0787 19.9066 47.0787 19.5052C47.0787 19.1794 46.9798 18.9102 46.7836 18.6993C46.5875 18.4883 46.3418 18.323 46.0468 18.2003C45.7518 18.0791 45.3455 17.9453 44.828 17.7973C44.1252 17.5863 43.5521 17.3786 43.1134 17.1723C42.6731 16.9661 42.2962 16.656 41.9811 16.2389C41.666 15.8233 41.5084 15.2661 41.5084 14.5703C41.5084 13.917 41.6691 13.3472 41.9888 12.8623C42.3101 12.3775 42.7597 12.006 43.3389 11.7478C43.9182 11.4897 44.5809 11.3606 45.3254 11.3606C46.4423 11.3606 47.3505 11.6376 48.0488 12.1917C48.747 12.7458 49.1331 13.5172 49.2057 14.5089H46.8161C46.7944 14.1295 46.6369 13.8163 46.3434 13.5676C46.0484 13.3204 45.6575 13.1961 45.171 13.1961C44.7462 13.1961 44.4079 13.3062 44.1545 13.5282C43.9012 13.7502 43.7745 14.0713 43.7745 14.4931C43.7745 14.7891 43.8703 15.0331 44.0618 15.2283C44.2534 15.4235 44.4913 15.5825 44.7755 15.7021C45.0597 15.8233 45.4614 15.9634 45.9788 16.1208C46.6817 16.3318 47.2563 16.5427 47.7012 16.7536C48.1461 16.9646 48.5292 17.281 48.8489 17.7028C49.1532 18.1042 49.3139 18.6237 49.3293 19.2628C49.337 19.5776 49.3015 19.8956 49.2197 20.1994C48.974 21.0983 48.4226 21.772 47.5622 22.2175C46.9829 22.5181 46.2955 22.6677 45.4984 22.6677C44.7431 22.6677 44.0634 22.5355 43.4579 22.2726H43.4563Z" fill="black"/>
                        <path d="M53.6223 21.9404C52.7743 21.4556 52.1008 20.7834 51.6049 19.924C51.1075 19.0645 50.8604 18.0916 50.8604 17.0055C50.8604 15.9193 51.1091 14.9622 51.6049 14.1043C52.1008 13.2448 52.7743 12.5727 53.6223 12.0879C54.4704 11.603 55.4018 11.3606 56.4151 11.3606C57.4285 11.3606 58.3723 11.603 59.2157 12.0879C60.0591 12.5727 60.7264 13.2448 61.2177 14.1043C61.7089 14.9638 61.9545 15.9303 61.9545 17.0055C61.9545 18.0806 61.7089 19.0645 61.2177 19.924C60.7264 20.7834 60.056 21.4556 59.208 21.9404C58.3599 22.4253 57.4285 22.6677 56.4151 22.6677C55.4018 22.6677 54.4704 22.4253 53.6223 21.9404ZM58.1391 20.2404C58.6349 19.9397 59.0242 19.51 59.3022 18.9511C59.5818 18.3923 59.7208 17.7438 59.7208 17.0055C59.7208 16.2672 59.5818 15.6218 59.3022 15.0677C59.0226 14.5136 58.6349 14.0902 58.1391 13.7942C57.6417 13.4999 57.0686 13.3519 56.4167 13.3519C55.7648 13.3519 55.1886 13.4999 54.6866 13.7942C54.1846 14.0902 53.7938 14.5136 53.5157 15.0677C53.2361 15.6218 53.0971 16.2672 53.0971 17.0055C53.0971 17.7438 53.2361 18.3923 53.5157 18.9511C53.7953 19.51 54.1861 19.9397 54.6866 20.2404C55.1886 20.541 55.7648 20.6906 56.4167 20.6906C57.0686 20.6906 57.6432 20.5394 58.1391 20.2404Z" fill="black"/>
                        <path d="M65.6602 20.8024H69.23V22.5576H63.4883V11.5181H65.6617V20.8008L65.6602 20.8024Z" fill="black"/>
                        <path d="M72.7376 22.2726C72.132 22.0097 71.6532 21.6303 71.3025 21.1345C70.9503 20.6386 70.7696 20.0546 70.7588 19.3793H73.0867C73.1176 19.8327 73.2751 20.1916 73.5594 20.4544C73.8436 20.7189 74.2344 20.8496 74.7318 20.8496C75.2292 20.8496 75.637 20.7252 75.9274 20.4781C76.2178 20.2309 76.363 19.9066 76.363 19.5052C76.363 19.1794 76.2642 18.9102 76.068 18.6993C75.8718 18.4883 75.6262 18.323 75.3311 18.2003C75.0361 18.0791 74.6298 17.9453 74.1124 17.7973C73.408 17.5863 72.8364 17.3786 72.3977 17.1723C71.959 16.9661 71.5806 16.656 71.2655 16.2389C70.9503 15.8233 70.7928 15.2661 70.7928 14.5703C70.7928 13.917 70.9534 13.3472 71.2732 12.8623C71.5945 12.3775 72.044 12.006 72.6233 11.7478C73.2025 11.4897 73.8652 11.3606 74.6098 11.3606C75.7266 11.3606 76.6349 11.6376 77.3331 12.1917C78.0313 12.7458 78.4175 13.5172 78.4901 14.5089H76.1004C76.0803 14.1295 75.9228 13.8163 75.6277 13.5676C75.3327 13.3204 74.9419 13.1961 74.4568 13.1961C74.032 13.1961 73.6937 13.3062 73.4404 13.5282C73.1871 13.7502 73.0604 14.0713 73.0604 14.4931C73.0604 14.7891 73.1562 15.0331 73.3477 15.2283C73.5393 15.4235 73.7772 15.5825 74.0614 15.7021C74.3456 15.8233 74.7472 15.9634 75.2647 16.1208C75.9676 16.3318 76.5422 16.5427 76.9871 16.7536C77.432 16.9646 77.815 17.281 78.1348 17.7028C78.4422 18.109 78.6029 18.6347 78.6152 19.2833C78.6214 19.5965 78.5843 19.9129 78.5009 20.2152C78.2522 21.1061 77.7023 21.7736 76.8465 22.2175C76.2672 22.5181 75.5798 22.6677 74.7828 22.6677C74.0274 22.6677 73.3477 22.5355 72.7422 22.2726H72.7376Z" fill="black"/>
                        <path d="M88.0882 11.5181V13.3047H85.2011V22.556H83.0277V13.3047H80.1406V11.5181H88.0866H88.0882Z" fill="black"/>
                        <path d="M96.1032 14.1043C96.5836 13.2449 97.2417 12.5758 98.0743 12.0957C98.9069 11.6156 99.8414 11.3763 100.875 11.3763C102.086 11.3763 103.146 11.6927 104.057 12.3256C104.967 12.9584 105.603 13.8336 105.966 14.9512H103.468C103.22 14.4239 102.871 14.0288 102.421 13.7659C101.972 13.503 101.451 13.3708 100.861 13.3708C100.229 13.3708 99.6684 13.5219 99.1772 13.821C98.686 14.1217 98.3029 14.5467 98.0295 15.0945C97.7545 15.6423 97.6186 16.2861 97.6186 17.0244C97.6186 17.7627 97.7561 18.3923 98.0295 18.9464C98.3029 19.5005 98.686 19.9271 99.1772 20.2278C99.6684 20.5284 100.229 20.678 100.861 20.678C101.451 20.678 101.97 20.5442 102.421 20.275C102.871 20.0058 103.22 19.6076 103.468 19.0802H105.966C105.603 20.2089 104.97 21.0857 104.065 21.7138C103.159 22.3419 102.097 22.6551 100.875 22.6551C99.8399 22.6551 98.9069 22.4158 98.0743 21.9357C97.2417 21.4556 96.5836 20.7897 96.1032 19.935C95.6228 19.0802 95.3818 18.1105 95.3818 17.0244C95.3818 15.9382 95.6228 14.9654 96.1032 14.1075V14.1043Z" fill="black"/>
                        <path d="M109.888 13.3047V16.0721H113.535V17.8272H109.888V20.7536H114V22.556H107.715V11.5007H114V13.3031H109.888V13.3047Z" fill="black"/>
                        <path d="M90.2443 22.5182H88.0879L92.7885 11.5023H94.9449L90.2443 22.5182Z" fill="black"/>
                        <path d="M24.4379 1.95189L11.124 33.024C19.2987 35.9787 28.4434 32.026 31.9669 23.7995C35.4919 15.573 32.1198 6.05254 24.4364 1.95032L24.4379 1.95189ZM16.3791 26.1276L23.0106 10.5294C23.5466 11.0741 24.0085 11.6817 24.3885 12.3365L18.6143 25.9167C17.8852 26.0804 17.1345 26.1528 16.3791 26.1276ZM24.8982 20.6543C24.0842 22.5543 22.7109 24.0293 21.0612 24.9691L25.3725 14.7623C25.8436 16.6591 25.7262 18.7229 24.8982 20.6543Z" fill="black"/>
                        <path d="M8.46855 13.3457C10.3129 9.04193 15.0181 6.91684 19.3186 8.27218L22.4173 1.04054C14.1979 -2.03534 4.94815 1.9142 1.39839 10.1989C-2.15136 18.4837 1.2949 28.0828 9.09571 32.1347L12.1944 24.903C8.29555 22.6095 6.62725 17.6478 8.4701 13.3441L8.46855 13.3457Z" fill="black"/>
                    </g>
                    <defs>
                        <clipPath id="clip0_683_8441">
                            <rect width="114" height="34" fill="white"/>
                        </clipPath>
                    </defs>
                </svg>
            </a>
        </div>
        <div class="nav-center">
            <a href="https://twitter.com/jayowtrades" target="_blank" rel="noopener noreferrer" class="nav-twitter-link">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
                </svg>
                <span>Follow jayowtrades</span>
            </a>
        </div>
        <div class="nav-right">
            <span class="nav-presale-status">PRESALE ENDED</span>
            <a href="#" class="nav-cta">
                <span>Click here for presale â†’</span>
            </a>
        </div>
    </nav>


    <!-- Hero Section -->
    <section style="padding: 100px 24px 0; max-width: 1400px; margin: 0 auto; position: relative;">
        <div style="color: #B5B7D3; font-size: 16px; margin-bottom: 8px;">&nbsp;</div>
        <div style="color: #E6E8F0; font-size: 24px; font-weight: 600; margin-bottom: 16px;">&nbsp;</div>
        <div style="position: relative; margin-bottom: 32px; display: inline-block;">
            <h1 style="background: linear-gradient(135deg, #FF7A3D 0%, #F6A6FF 50%, #FFFFFF 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; font-size: 72px; font-weight: 300; line-height: 1.1; letter-spacing: -0.02em; margin: 0;">
                SLX Community Presale - 22nd Dec.
            </h1>
            <div style="position: absolute; bottom: -12px; left: 0; right: 0; width: 100%; height: 2px; background: #FFFFFF;"></div>
        </div>
    </section>

    <!-- Main Content -->
    <div style="max-width: 1400px; margin: 0 auto; padding: 40px 24px; display: grid; grid-template-columns: 1fr 1fr; gap: 40px; align-items: stretch;">
        <!-- Left Column -->
        <div style="display: flex; flex-direction: column;">
            <!-- Stats Grid -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Total Amount</div>
                    <div class="stat-value" id="totalAmount">$0</div>
                    <div class="stat-subtitle">USDC Transferred</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Total Transactions</div>
                    <div class="stat-value" id="totalTransactions">0</div>
                    <div class="stat-subtitle">Transfer Events</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Refunds</div>
                    <div class="stat-value" id="refundAmount">$0</div>
                    <div class="stat-subtitle" id="refundCount">0 transactions</div>
                </div>
            </div>

            <!-- Progress Section -->
            <div class="glass-container progress-section" style="margin-top: 24px; flex: 1; display: flex; flex-direction: column;">
                <div class="progress-header">
                    <div class="progress-label">Fundraising Progress</div>
                    <div class="progress-amount" id="currentAmount">$0</div>
                </div>
                <div class="progress-bar-wrapper">
                    <div class="progress-bar-fill" id="progressBar" style="width: 0%"></div>
                    <div class="progress-percentage" id="progressPercentage">0%</div>
                </div>
                <div class="progress-info">
                    <span>$0</span>
                    <span id="progressText">0% of $4M target</span>
                    <span>$8,500,000</span>
                </div>
            </div>
        </div>

        <!-- Right Column -->
        <div style="display: flex; flex-direction: column;">
            <!-- Chart Section -->
            <div class="glass-container" style="flex: 1; display: flex; flex-direction: column;">
                <h2 class="section-title">Amount Over Time</h2>
                <div class="chart-controls">
                    <button class="timeframe-btn active" data-timeframe="1h" onclick="setTimeframe('1h')">1 Hour</button>
                    <button class="timeframe-btn" data-timeframe="6h" onclick="setTimeframe('6h')">6 Hours</button>
                    <button class="timeframe-btn" data-timeframe="24h" onclick="setTimeframe('24h')">24 Hours</button>
                    <button class="timeframe-btn" data-timeframe="7d" onclick="setTimeframe('7d')">7 Days</button>
                    <button class="timeframe-btn" data-timeframe="30d" onclick="setTimeframe('30d')">30 Days</button>
                    <button class="timeframe-btn" data-timeframe="all" onclick="setTimeframe('all')">All Time</button>
                </div>
                <div class="chart-container" style="flex: 1;">
                    <canvas id="amountChart"></canvas>
                </div>
            </div>

        </div>
    </div>

    <!-- Full Width Transactions Section -->
    <div style="max-width: 1400px; margin: 0 auto; padding: 0 24px 40px;">

        <!-- Transactions Section -->
        <div class="glass-container transactions-section">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                <h2 class="section-title">Recent Transactions</h2>
                <div class="status-indicator">
                    <div class="status-dot"></div>
                    <span id="statusText">Monitoring...</span>
                </div>
            </div>

            <!-- Filters -->
            <div class="filters-section">
                <div class="filter-group">
                    <label class="filter-label">Date From</label>
                    <input type="datetime-local" class="filter-input" id="filterDateFrom">
                </div>
                <div class="filter-group">
                    <label class="filter-label">Date To</label>
                    <input type="datetime-local" class="filter-input" id="filterDateTo">
                </div>
                <div class="filter-group">
                    <label class="filter-label">Source Address</label>
                    <input type="text" class="filter-input" id="filterSource" placeholder="Filter by source...">
                </div>
                <div class="filter-group">
                    <label class="filter-label">Min Amount (USDC)</label>
                    <input type="number" class="filter-input" id="filterMinAmount" placeholder="0" step="0.01">
                </div>
                <div class="filter-group">
                    <label class="filter-label">Max Amount (USDC)</label>
                    <input type="number" class="filter-input" id="filterMaxAmount" placeholder="No limit" step="0.01">
                </div>
                <div class="btn-group">
                    <button class="btn-primary" onclick="applyFilters()">Apply Filters</button>
                    <button class="btn-secondary" onclick="clearFilters()">Clear</button>
                </div>
            </div>

            <!-- Transactions Table -->
            <div class="transactions-table-wrapper">
                <table class="transactions-table">
                    <thead>
                        <tr>
                            <th onclick="sortTable('date')">Date (UTC)</th>
                            <th onclick="sortTable('source')">Source</th>
                            <th onclick="sortTable('type')">Type</th>
                            <th onclick="sortTable('amount')" style="text-align: right;">Amount</th>
                            <th onclick="sortTable('txid')">Transaction ID</th>
                        </tr>
                    </thead>
                    <tbody id="transactionsBody">
                        <tr>
                            <td colspan="5" style="text-align: center; padding: 40px; color: var(--muted-text);">
                                Loading transactions...
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // API Configuration
        const API_BASE = window.location.hostname === 'localhost' 
            ? 'http://localhost:5000/api' 
            : '/api';
        const TARGET_AMOUNT = 4000000;
        const HARD_CAP_AMOUNT = 6500000;

        // State
        let totalAmount = 0;
        let totalTransactions = 0;
        let newTransactionsCount = 0;
        let refundAmount = 0;
        let refundCount = 0;
        let transactions = [];
        let filteredTransactions = [];
        let initialLoadComplete = false;
        let currentFilters = {
            dateFrom: null,
            dateTo: null,
            source: '',
            minAmount: null,
            maxAmount: null
        };
        let sortColumn = 'date';
        let sortDirection = 'desc';
        let amountChart = null;
        let allChartData = { labels: [], amounts: [] };
        let currentTimeframe = 'all';

        // Formatting Functions
        function formatAmount(amount) {
            if (!amount && amount !== 0) return '$0';
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(amount);
        }

        function formatAmountNoSymbol(amount) {
            if (!amount && amount !== 0) return '0';
            return new Intl.NumberFormat('en-US', {
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(amount);
        }

        function formatAddress(address) {
            if (!address) return 'N/A';
            return `${address.substring(0, 8)}...${address.substring(address.length - 8)}`;
        }

        function formatTransactionId(txId) {
            if (!txId) return 'N/A';
            return `${txId.substring(0, 8)}...${txId.substring(txId.length - 8)}`;
        }

        // Update Stats
        function updateStats() {
            const totalAmountEl = document.getElementById('totalAmount');
            const totalTransactionsEl = document.getElementById('totalTransactions');
            const refundAmountEl = document.getElementById('refundAmount');
            const refundCountEl = document.getElementById('refundCount');
            
            if (totalAmountEl) {
                totalAmountEl.textContent = formatAmount(totalAmount);
            }
            if (totalTransactionsEl) {
                totalTransactionsEl.textContent = formatAmountNoSymbol(totalTransactions);
            }
            if (refundAmountEl) {
                refundAmountEl.textContent = formatAmount(refundAmount);
            }
            if (refundCountEl) {
                refundCountEl.textContent = formatAmountNoSymbol(refundCount) + ' transactions';
            }
            
            updateProgressBar();
        }

        function updateProgressBar() {
            let percentage = (totalAmount / TARGET_AMOUNT) * 100;
            
            if (totalAmount >= HARD_CAP_AMOUNT) {
                percentage = 100;
            } else {
                percentage = Math.min(percentage, 100);
            }
            
            const percentageText = percentage.toFixed(2);
            const progressBar = document.getElementById('progressBar');
            progressBar.style.width = `${Math.min(percentage, 100)}%`;
            
            let displayText = `${percentageText}%`;
            if (totalAmount >= HARD_CAP_AMOUNT) {
                displayText = '100%';
            }
            document.getElementById('progressPercentage').textContent = displayText;
            document.getElementById('currentAmount').textContent = formatAmount(totalAmount);
            
            let progressText = '';
            if (totalAmount >= HARD_CAP_AMOUNT) {
                progressText = 'Hard Cap Reached';
            } else if (totalAmount > TARGET_AMOUNT) {
                progressText = `${percentageText}% of $4M target (Hard Cap: $6.5M)`;
            } else {
                progressText = `${percentageText}% of $4M target`;
            }
            document.getElementById('progressText').textContent = progressText;
        }

        // Filters
        function parseDateFilter(dateString) {
            if (!dateString) return null;
            return new Date(dateString);
        }

        function parseUTCString(utcString) {
            if (!utcString || !utcString.includes('UTC')) return null;
            const datePart = utcString.replace(' UTC', '').replace(' ', 'T');
            return new Date(datePart + 'Z');
        }

        function applyFilters() {
            const dateFrom = parseDateFilter(document.getElementById('filterDateFrom').value);
            const dateTo = parseDateFilter(document.getElementById('filterDateTo').value);
            const sourceFilter = document.getElementById('filterSource').value.toLowerCase();
            const minAmount = parseFloat(document.getElementById('filterMinAmount').value) || null;
            const maxAmount = parseFloat(document.getElementById('filterMaxAmount').value) || null;
            
            currentFilters = {
                dateFrom: dateFrom,
                dateTo: dateTo,
                source: sourceFilter,
                minAmount: minAmount,
                maxAmount: maxAmount
            };
            
            filterTransactions();
        }

        function clearFilters() {
            document.getElementById('filterDateFrom').value = '';
            document.getElementById('filterDateTo').value = '';
            document.getElementById('filterSource').value = '';
            document.getElementById('filterMinAmount').value = '';
            document.getElementById('filterMaxAmount').value = '';
            
            currentFilters = {
                dateFrom: null,
                dateTo: null,
                source: '',
                minAmount: null,
                maxAmount: null
            };
            
            filterTransactions();
        }

        function filterTransactions() {
            filteredTransactions = transactions.filter(transfer => {
                if (currentFilters.dateFrom) {
                    const transferDate = parseUTCString(transfer.blocktime_utc);
                    if (!transferDate || transferDate < currentFilters.dateFrom) {
                        return false;
                    }
                }
                
                if (currentFilters.dateTo) {
                    const transferDate = parseUTCString(transfer.blocktime_utc);
                    const endDate = new Date(currentFilters.dateTo);
                    endDate.setHours(23, 59, 59, 999);
                    if (!transferDate || transferDate > endDate) {
                        return false;
                    }
                }
                
                if (currentFilters.source && 
                    !transfer.source.toLowerCase().includes(currentFilters.source)) {
                    return false;
                }
                
                if (currentFilters.minAmount !== null && 
                    transfer.amount < currentFilters.minAmount) {
                    return false;
                }
                
                if (currentFilters.maxAmount !== null && 
                    transfer.amount > currentFilters.maxAmount) {
                    return false;
                }
                
                return true;
            });
            
            renderTransactions();
        }

        function sortTable(column) {
            if (sortColumn === column) {
                sortDirection = sortDirection === 'asc' ? 'desc' : 'asc';
            } else {
                sortColumn = column;
                sortDirection = 'desc';
            }
            renderTransactions();
        }

        function renderTransactions() {
            const tbody = document.getElementById('transactionsBody');
            const transactionsToShow = filteredTransactions.length > 0 ? filteredTransactions : transactions;
            
            if (transactionsToShow.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="5" style="text-align: center; padding: 40px; color: var(--muted-text);">
                            ${transactions.length === 0 ? 'Waiting for transactions...' : 'No transactions match the filters'}
                        </td>
                    </tr>
                `;
                return;
            }

            const sortedTransactions = [...transactionsToShow].sort((a, b) => {
                let aVal, bVal;
                
                if (sortColumn === 'date') {
                    aVal = parseUTCString(a.blocktime_utc) || new Date(0);
                    bVal = parseUTCString(b.blocktime_utc) || new Date(0);
                } else if (sortColumn === 'source') {
                    aVal = (a.source || '').toLowerCase();
                    bVal = (b.source || '').toLowerCase();
                } else if (sortColumn === 'type') {
                    aVal = (a.transfer_type || a.direction || '').toLowerCase();
                    bVal = (b.transfer_type || b.direction || '').toLowerCase();
                } else if (sortColumn === 'amount') {
                    aVal = a.amount || 0;
                    bVal = b.amount || 0;
                } else if (sortColumn === 'txid') {
                    aVal = (a.transaction_id || '').toLowerCase();
                    bVal = (b.transaction_id || '').toLowerCase();
                }
                
                if (sortColumn === 'date' || sortColumn === 'amount') {
                    return sortDirection === 'asc' ? aVal - bVal : bVal - aVal;
                } else {
                    if (aVal < bVal) return sortDirection === 'asc' ? -1 : 1;
                    if (aVal > bVal) return sortDirection === 'asc' ? 1 : -1;
                    return 0;
                }
            });
            
            tbody.innerHTML = sortedTransactions.map(transfer => {
                const txId = transfer.transaction_id || '';
                const txIdShort = formatTransactionId(txId);
                const solscanUrl = txId ? `https://solscan.io/tx/${txId}` : '#';
                
                let transferType = 'Unknown';
                let typeClass = 'type-unknown';
                if (transfer.transfer_type) {
                    transferType = transfer.transfer_type.charAt(0).toUpperCase() + transfer.transfer_type.slice(1);
                    typeClass = transfer.transfer_type === 'deposit' ? 'type-deposit' : transfer.transfer_type === 'refund' ? 'type-refund' : 'type-transfer';
                } else if (transfer.direction) {
                    transferType = transfer.direction === 'out' ? 'Deposit' : transfer.direction === 'in' ? 'Refund' : 'Unknown';
                    typeClass = transfer.direction === 'out' ? 'type-deposit' : transfer.direction === 'in' ? 'type-refund' : 'type-unknown';
                }
                
                return `
                    <tr>
                        <td>${transfer.blocktime_utc || 'N/A'}</td>
                        <td>
                            ${transfer.source ? `<a href="https://solscan.io/account/${transfer.source}" target="_blank" rel="noopener noreferrer" style="color: var(--cta-bg); text-decoration: none; transition: color 180ms ease-out;" onmouseover="this.style.color='#FFFFFF'" onmouseout="this.style.color='var(--cta-bg)'">${formatAddress(transfer.source)}</a>` : 'N/A'}
                        </td>
                        <td><span class="type-badge ${typeClass}">${transferType}</span></td>
                        <td style="text-align: right;">${transfer.amount.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})} USDC</td>
                        <td>
                            ${txId ? `<a href="${solscanUrl}" target="_blank" rel="noopener noreferrer" style="color: var(--cta-bg); text-decoration: none;">${txIdShort}</a>` : 'N/A'}
                        </td>
                    </tr>
                `;
            }).join('');
        }

        // Chart Functions
        function initChart() {
            const ctx = document.getElementById('amountChart');
            if (!ctx) return;

            amountChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Cumulative Amount (USDC)',
                        data: [],
                        borderColor: '#FF7A3D',
                        backgroundColor: 'rgba(255, 122, 61, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointRadius: 0,
                        pointHoverRadius: 6,
                        pointBackgroundColor: '#FF7A3D',
                        pointBorderColor: '#FFFFFF',
                        pointBorderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: 'rgba(36, 29, 62, 0.95)',
                            titleColor: '#FF8A4C',
                            bodyColor: '#E6E8F0',
                            borderColor: 'rgba(255, 122, 61, 0.3)',
                            borderWidth: 1,
                            padding: 12,
                            callbacks: {
                                label: function(context) {
                                    return 'Amount: $' + context.parsed.y.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0});
                                }
                            }
                        },
                        zoom: {
                            zoom: {
                                wheel: { enabled: true },
                                pinch: { enabled: true },
                                mode: 'x'
                            },
                            pan: {
                                enabled: true,
                                mode: 'x'
                            }
                        }
                    },
                    scales: {
                        x: {
                            ticks: {
                                color: '#9A9DB8',
                                maxRotation: 45,
                                minRotation: 0,
                                font: { size: 11 }
                            },
                            grid: { 
                                color: 'rgba(255,255,255,0.05)',
                                display: true
                            }
                        },
                        y: {
                            ticks: {
                                color: '#9A9DB8',
                                callback: function(value) {
                                    return '$' + value.toLocaleString('en-US', {maximumFractionDigits: 0});
                                },
                                font: { size: 11 }
                            },
                            grid: { 
                                color: 'rgba(255,255,255,0.05)',
                                display: true
                            },
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        function setTimeframe(timeframe) {
            currentTimeframe = timeframe;
            
            document.querySelectorAll('.timeframe-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-timeframe="${timeframe}"]`).classList.add('active');
            
            filterChartData(timeframe);
        }

        function filterChartData(timeframe) {
            if (!amountChart || !allChartData.labels || allChartData.labels.length === 0) {
                return;
            }

            const now = new Date();
            let cutoffTime = null;

            switch(timeframe) {
                case '1h': cutoffTime = new Date(now.getTime() - 60 * 60 * 1000); break;
                case '6h': cutoffTime = new Date(now.getTime() - 6 * 60 * 60 * 1000); break;
                case '24h': cutoffTime = new Date(now.getTime() - 24 * 60 * 60 * 1000); break;
                case '7d': cutoffTime = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000); break;
                case '30d': cutoffTime = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000); break;
                case 'all':
                default:
                    amountChart.data.labels = allChartData.labels;
                    amountChart.data.datasets[0].data = allChartData.amounts;
                    amountChart.update('none');
                    return;
            }

            const filteredLabels = [];
            const filteredAmounts = [];
            
            for (let i = 0; i < allChartData.labels.length; i++) {
                const label = allChartData.labels[i];
                const labelDate = new Date(label.replace(' UTC', ''));
                
                if (labelDate >= cutoffTime) {
                    filteredLabels.push(label);
                    filteredAmounts.push(allChartData.amounts[i]);
                }
            }

            amountChart.data.labels = filteredLabels;
            amountChart.data.datasets[0].data = filteredAmounts;
            amountChart.update('none');
        }

        async function loadChartData() {
            try {
                const response = await fetch(`${API_BASE}/chart-data`);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                
                if (data.labels && data.amounts) {
                    // Ensure amounts are numbers
                    allChartData.labels = data.labels || [];
                    allChartData.amounts = (data.amounts || []).map(amt => parseFloat(amt) || 0);
                    
                    if (amountChart) {
                        filterChartData(currentTimeframe);
                    } else {
                        // Chart not initialized yet, wait a bit
                        setTimeout(() => {
                            if (amountChart) {
                                filterChartData(currentTimeframe);
                            }
                        }, 500);
                    }
                }
            } catch (error) {
                console.error('Error loading chart data:', error);
                // Try to initialize chart with empty data if it exists
                if (amountChart && allChartData.labels.length === 0) {
                    amountChart.data.labels = [];
                    amountChart.data.datasets[0].data = [];
                    amountChart.update();
                }
            }
        }

        // API Functions
        async function loadInitialStats() {
            try {
                const response = await fetch(`${API_BASE}/stats`);
                const data = await response.json();
                
                totalAmount = data.total_amount || 0;
                totalTransactions = data.total_transfers || 0;
                
                if (data.refunds) {
                    refundAmount = data.refunds.amount || 0;
                    refundCount = data.refunds.count || 0;
                }
                
                updateStats();
            } catch (error) {
                console.error('Error loading stats:', error);
            }
        }

        async function loadExistingTransactions() {
            if (initialLoadComplete) return;
            
            try {
                document.getElementById('statusText').textContent = 'Loading transactions...';
                
                let allTransfers = [];
                let offset = 0;
                const limit = 1000;
                let hasMore = true;
                
                while (hasMore) {
                    try {
                        const url = `${API_BASE}/transfers?limit=${limit}&offset=${offset}`;
                        const response = await fetch(url);
                        
                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }
                        
                        const data = await response.json();
                        
                        if (data.transfers && data.transfers.length > 0) {
                            allTransfers = allTransfers.concat(data.transfers);
                            offset += data.transfers.length;
                            
                            document.getElementById('statusText').textContent = 
                                `Loading transactions... (${allTransfers.length} loaded)`;
                            
                            if (data.transfers.length < limit) {
                                hasMore = false;
                            }
                        } else {
                            hasMore = false;
                        }
                    } catch (fetchError) {
                        console.error('Error fetching transactions batch:', fetchError);
                        if (allTransfers.length > 0) {
                            hasMore = false;
                        } else {
                            throw fetchError;
                        }
                    }
                }
                
                if (allTransfers.length > 0) {
                    const existingTransfers = allTransfers.map(t => {
                        let blocktime_utc = t.blocktime_utc;
                        if (!blocktime_utc && t.blocktime) {
                            const dt = new Date(t.blocktime * 1000);
                            blocktime_utc = dt.toISOString().replace('T', ' ').substring(0, 19) + ' UTC';
                        }
                        
                        return {
                            source: t.source || '',
                            blocktime: t.blocktime || 0,
                            blocktime_utc: blocktime_utc || '',
                            transaction_id: t.transaction_id || '',
                            amount: parseFloat(t.amount) || 0,
                            direction: t.direction || '',
                            transfer_type: t.transfer_type || '',
                            timestamp: t.blocktime || 0
                        };
                    });
                    
                    existingTransfers.sort((a, b) => (b.timestamp || 0) - (a.timestamp || 0));
                    transactions = existingTransfers;
                    
                    try {
                        const statsResponse = await fetch(`${API_BASE}/stats`);
                        const statsData = await statsResponse.json();
                        totalAmount = statsData.total_amount || 0;
                        totalTransactions = statsData.total_transfers || transactions.length;
                        
                        if (statsData.refunds) {
                            refundAmount = statsData.refunds.amount || 0;
                            refundCount = statsData.refunds.count || 0;
                        }
                    } catch (statsError) {
                        console.error('Error fetching stats:', statsError);
                        totalTransactions = transactions.length;
                    }
                    
                    updateStats();
                    initialLoadComplete = true;
                    filterTransactions();
                    loadChartData();
                    
                    document.getElementById('statusText').textContent = 
                        `Loaded ${transactions.length} transactions - Monitoring...`;
                } else {
                    initialLoadComplete = true;
                    document.getElementById('statusText').textContent = 'No transactions - Monitoring...';
                }
            } catch (error) {
                console.error('Error loading transactions:', error);
                initialLoadComplete = true;
                document.getElementById('statusText').textContent = `Error: ${error.message}`;
            }
        }

        async function checkForNewTransfers() {
            if (!initialLoadComplete) return;
            
            try {
                const response = await fetch(`${API_BASE}/new-transfers`);
                const data = await response.json();
                
                if (data.new_transfers && data.new_transfers.length > 0) {
                    let addedCount = 0;
                    data.new_transfers.forEach(transfer => {
                        const exists = transactions.some(t => t.transaction_id === transfer.transaction_id);
                        if (!exists) {
                            if (!transfer.transfer_type && transfer.direction) {
                                transfer.transfer_type = transfer.direction === 'out' ? 'deposit' : transfer.direction === 'in' ? 'refund' : '';
                            }
                            transactions.unshift(transfer);
                            totalTransactions++;
                            newTransactionsCount++;
                            addedCount++;
                        }
                    });
                    
                    if (addedCount > 0) {
                        loadInitialStats();
                        filterTransactions();
                        loadChartData();
                        document.getElementById('statusText').textContent = 
                            `Found ${addedCount} new transaction(s)`;
                        setTimeout(() => {
                            document.getElementById('statusText').textContent = 'Monitoring...';
                        }, 3000);
                    }
                }
            } catch (error) {
                console.error('Error fetching transfers:', error);
                document.getElementById('statusText').textContent = 'Connection error';
            }
        }

        // Initialize
        console.log('ðŸš€ Initializing dashboard...');
        
        // Wait for DOM to be ready
        function initializeDashboard() {
            loadInitialStats();
            initChart();
            
            // Load chart data after chart is initialized
            setTimeout(() => {
                loadChartData();
            }, 100);
            
            loadExistingTransactions();
        }
        
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeDashboard);
        } else {
            initializeDashboard();
        }
        
        // Check for new transfers every minute
        setInterval(() => {
            if (initialLoadComplete) {
                checkForNewTransfers();
            }
        }, 60000);
        
        // Refresh chart data periodically
        setInterval(() => {
            if (initialLoadComplete && amountChart) {
                loadChartData();
            }
        }, 30000);
        
        // Filter input handlers
        document.getElementById('filterSource').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') applyFilters();
        });
        document.getElementById('filterMinAmount').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') applyFilters();
        });
        document.getElementById('filterMaxAmount').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') applyFilters();
        });
        document.getElementById('filterDateFrom').addEventListener('change', applyFilters);
        document.getElementById('filterDateTo').addEventListener('change', applyFilters);
    </script>
</body>
</html>

